<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<title>INScore Scene Test</title>

	<link href="../fonts/fonts.css" rel="stylesheet">
	<link href="../css/inscore.css" rel="stylesheet">
	<script src="../lib/libINScore.js"></script>
	<!-- <script src="../lib/libGUIDOEngine.js"></script>
	<script src="../lib/libmusicxml.js"></script> -->
	<script src="../lib/libfaust-wasm.js"></script> 
	<script src="../lib/FaustLibrary.js"></script>
	<script src="../inscoreview.js"></script>
	<script src="../inscoretests.js"></script>
	<style>
	body { margin: 50; background: gainsboro; height: 100%; }
	.box { width: 50%; height: 70%; border-radius: 15px; font-size: 1px; }
	.test { margin: 10px; padding: 10px; background: black; }

	</style>
</head>

<body>

<h1>INScore JS Tests</h1>
<div class="inscore box" id="scene">

	/ITL/scene/text set html "Playing with &lt;a href=https://faust.grame.fr>Faust&lt;/a> objects";
	/ITL/scene/text y -0.7;
	/ITL/scene/text fontSize 32;

	/ITL/scene/faust set faust 'import("stdfaust.lib");
		process = ba.pulsen(1, 10000) : pm.djembe(60, 0.3, 0.4, 1) &lt;: dm.freeverb_demo;';
	/ITL/scene/faust scale 0.7;
	/ITL/scene/faust y -0.3;

	/ITL/scene/faust2 set faust  8 'import("stdfaust.lib");
	process = ba.pulsen(1, ba.hz2midikey(freq) * 1000) : pm.marimba(freq, 0, 7000, 0.5, 0.8) * gate * gain with {
	  freq = hslider("freq", 440, 40, 8000, 1);
	  gain = hslider("gain", 0.5, 0, 1, 0.01);
	  gate = button("gate");
	};
	effect = dm.freeverb_demo;';
	/ITL/scene/faust2 scale 0.6;
	/ITL/scene/faust2 y 0.3;
	
	/ITL/scene/play1 set txt "Start";
	/ITL/scene/play* fontSize 24;
	/ITL/scene/play1 y 0.8;
	/ITL/scene/play* watch mouseEnter ( /ITL/scene/$self color red );
	/ITL/scene/play* watch mouseLeave ( /ITL/scene/$self color black );

	/ITL/scene/play1 watch mouseDown (
		/ITL/scene/$self push,
		/ITL/scene/$self set txt "Stop",
		/ITL/scene/faust play 1,
		/ITL/scene/time* tempo 60,
		/ITL/scene/play1 watch mouseDown (
			/ITL/scene/$self set txt "Start",
			/ITL/scene/time* tempo 0,
			/ITL/scene/$self pop
		)
	);

	/ITL/scene/time1 set rect 0.1 0.1;
	/ITL/scene/time2 set rect 0.1 0.1;
	/ITL/scene/time3 set rect 0.1 0.1;
	/ITL/scene/time* show 0;

	t1z1 = 1 4 4 4;
	t1z2 = 8 4 12 4;
	/ITL/scene/time1 watch timeEnter $t1z1 ( /ITL/scene/faust play 1 );
	/ITL/scene/time1 watch timeLeave $t1z1 ( /ITL/scene/faust play 0 );
	/ITL/scene/time1 watch timeEnter $t1z2 ( /ITL/scene/faust play 1 );
	/ITL/scene/time1 watch timeLeave $t1z2 ( /ITL/scene/faust2 keyOn 0 50 127, /ITL/scene/faust play 0, /ITL/scene/time1 date 0 );

	t2z1 = 4 4 8 4;
	t2z2 = 12 4 20 4;
	/ITL/scene/time2 watch timeEnter $t2z1 ( /ITL/scene/faust2 play 1, /ITL/scene/faust2 keyOn 0 60 127 );
	/ITL/scene/time2 watch timeLeave $t2z1 ( /ITL/scene/faust2 play 0 );
	/ITL/scene/time2 watch timeEnter $t2z2 ( /ITL/scene/faust2 play 1 );
	/ITL/scene/time2 watch timeLeave $t2z2 ( /ITL/scene/faust2 play 0, /ITL/scene/time2 date 0 );

	t3z1 = 15 4 30 4;
	/ITL/scene/time3 watch timeEnter $t3z1 ( /ITL/scene/faust* Freeverb_Wet 0.8);
	/ITL/scene/time3 watch timeLeave $t3z1 ( /ITL/scene/faust* Freeverb_Wet 0.33, /ITL/scene/time3 date 0 );

	
	<!-- /ITL/scene/time watch timeEnter 1 4 8 4 ( 
		/ITL/scene/faust play 1 
		/ITL/scene/faust2 play 0,
	);
	/ITL/scene/time watch timeEnter 8 4 16 4 ( 
		/ITL/scene/faust play 0,
		/ITL/scene/faust2 play 1,
		/ITL/scene/faust2 keyOn 0 60 127
	);
	/ITL/scene/time watch timeEnter 16 4 888 4 ( /ITL/scene/time date 0 );
	/ITL/scene/time tempo 60; -->

</div>

</body>

</html>
