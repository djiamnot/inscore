<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" /> 
	<meta http-equiv="Pragma" content="no-cache" /> 
	<meta http-equiv="Expires" content="0" />
	<title>INScore Scene Test</title>

	<link href="/fonts/fonts.css" rel="stylesheet">
	<link href="/css/inscore.css" rel="stylesheet">
	<script src="/lib/libINScore.js"></script>
	<script src="/lib/libGUIDOEngine.js"></script>
	<script src="/lib/libfaust-wasm.js"></script> 
	<script src="/lib/FaustLibrary.js"></script>
	<script src="/inscoreview.js"></script>
	<script src="/inscoreglue.js"></script>
	<style>
	body { margin: 50; background: gainsboro; height: 100%; }
	.box { width: 50%; height: 70%; border-radius: 15px; font-size: 1px; }
	.test { margin: 10px; padding: 10px; background: black; }

	</style>
</head>

<body>

<h1>INScore FilDeSoi Test</h1>

<div class="inscore box" id="scene">
	
	<!-- /ITL/scene/wait set txt "Loading..."; 
	/ITL/scene/faust set faustf "FilDeSoi1PanStereo.dsp.txt";
	/ITL/scene/faust show 0;
	/ITL/scene/wait del;  -->

	/ITL/scene/play* watch mouseEnter ( /ITL/scene/$self color red );
	/ITL/scene/play* watch mouseLeave ( /ITL/scene/$self color black );

	/ITL/scene/score set gmnf "fildesoi1.gmn.txt";
	/ITL/scene/score height 1.8;
	/ITL/scene/score map staff1;
	/ITL/scene/score set date 1 4;
	/ITL/scene/score watch mouseDown (
		/ITL/scene/cursor date '$date:staff1',
		/ITL/scene/audio vdate '$date:staff1'
	);
	/ITL/scene/score watch mouseMove (
		/ITL/scene/cursor date '$date:staff1',
		/ITL/scene/audio vdate '$date:staff1'
	);
	/ITL/scene/score watch mouseEnter;

	/ITL/scene/audio set audio "FilDeSoi1_guitare_1_2_3_4.wav";
	/ITL/scene/audio show 0;

	
	<!-- Buttons variables -->
	play  = 'rsrc/play.png';
	pause = 'rsrc/pause.png';
	stop  = 'rsrc/stop.png';
	origin = 1.2;
	alpha = 120;
	w = 0.09;
	<!-- Button Play / Pause-->

	/ITL/scene/play set img $play;
	/ITL/scene/play y 0.9;
	/ITL/scene/play xorigin $origin;
	/ITL/scene/play width $w;
	/ITL/scene/play alpha $alpha;

	/ITL/scene/play watch mouseDown (
		/ITL/scene/$self push,
		/ITL/scene/play set img $pause,
		/ITL/scene/cursor tempo 60,
		/ITL/scene/audio play 1,
		/ITL/scene/play watch mouseDown (
			/ITL/scene/play set img $play,
			/ITL/scene/cursor tempo 0,
			/ITL/scene/audio play 0,
			/ITL/scene/$self pop
		)
	);
	
	<!-- Button Stop -->
	/ITL/scene/stop set img $stop;
	/ITL/scene/stop y 0.9;
	/ITL/scene/stop xorigin $origin * -1;
	/ITL/scene/stop width $w;
	/ITL/scene/stop alpha $alpha;

	/ITL/scene/stop watch mouseDown ( /ITL/scene event STOP );
	
	/ITL/scene watch STOP (
		/ITL/scene/play set img $play,
		/ITL/scene/play width $w,
		/ITL/scene/play pop,
		/ITL/scene/play watch mouseDown $initplay,
		/ITL/scene/cursor tempo 0,
		/ITL/scene/audio play 0,
		/ITL/scene/audio vdate 0,
		/ITL/scene/cursor date 1000,
		/ITL/scene/cursor date 0
	);

	cursorWidth = 0.07;
	/ITL/scene/cursor set ellipse $cursorWidth $cursorWidth;
	/ITL/scene/cursor color blue;
	/ITL/scene/cursor alpha 120;
	/ITL/scene/sync cursor "score:staff1" relative;

	<!-- /ITL/scene/faust scale 0.7;
	/ITL/scene/faust y -0.3; -->

	<!-- /ITL/scene/text set html "Faust objects";
	/ITL/scene/text y -0.7;
	/ITL/scene/text fontSize 32; -->

	

</div>

</body>
</html>